<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>è®¾è®¡æ€æƒ³ - æ ‡ç­¾ - Sam&#39;s Garage</title>
        <link>http://samrks.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/</link>
        <description>è®¾è®¡æ€æƒ³ - æ ‡ç­¾ - Sam&#39;s Garage</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>ryuukousen@gmail.com (Sam)</managingEditor>
            <webMaster>ryuukousen@gmail.com (Sam)</webMaster><lastBuildDate>Sun, 25 Oct 2020 14:20:02 &#43;0800</lastBuildDate><atom:link href="http://samrks.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/" rel="self" type="application/rss+xml" /><item>
    <title>jQuery çš„è®¾è®¡æ€æƒ³ï¼ˆä¸‹ï¼‰</title>
    <link>http://samrks.github.io/dom-jquery-prototype/</link>
    <pubDate>Sun, 25 Oct 2020 14:20:02 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>http://samrks.github.io/dom-jquery-prototype/</guid>
    <description><![CDATA[<p>â€‹</p>
<h2 id="å‘½åé£æ ¼">å‘½åé£æ ¼</h2>
<blockquote>
<p>å‘½åé£æ ¼ï¼šæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶éƒ½ä¼šæœ‰ä¸€äº›é£æ ¼ï¼Œè¿™äº›é£æ ¼å¯èƒ½æ˜¯ä¸šç•Œå…±è¯†ã€ä¹Ÿå¯èƒ½æ˜¯è‡ªå·±çš„å°æŠ€å·§</p>
<ul>
<li>ä¸‹é¢ä»‹ç»ä¸€ä¸ªå‘½åé£æ ¼ï¼ˆä»¥å‰å¯èƒ½æ˜¯ä¸šç•Œå…±è¯†ï¼Œä½†ç°åœ¨å·²ç»ä¸å¤ªå¸¸ç”¨äº†ï¼Œå› ä¸º jQuery å¾ˆå°‘äººç”¨äº†ï¼‰</li>
</ul>
</blockquote>
<h3 id="ä¸‹é¢çš„ä»£ç ä»¤äººè¯¯è§£">ä¸‹é¢çš„ä»£ç ä»¤äººè¯¯è§£</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">div1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">div2</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">)</span>
<span class="c1">// div2 åˆ°åº•æ˜¯ DOM å¯¹è±¡ï¼Œè¿˜æ˜¯ jQuery å¯¹è±¡? 
</span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ã€ŒDOM å¯¹è±¡ã€åªèƒ½ä½¿ç”¨ DOM APIï¼Œå¦‚ querySelectorã€appendChild â€¦</li>
<li>ã€ŒjQuery å¯¹è±¡ã€åªèƒ½ä½¿ç”¨ jQuery çš„ APIï¼Œå¦‚ findã€ addClass â€¦</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div#test&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>æˆ‘ä»¬ä¼šè¯¯ä»¥ä¸º div æ˜¯ä¸€ä¸ª DOM</li>
<li>å®é™…ä¸Š div æ˜¯ jQuery æ„é€ çš„ api å¯¹è±¡</li>
<li>æ€ä¹ˆé¿å…è¿™ç§è¯¯è§£å‘¢ï¼Ÿ</li>
</ul>
<h3 id="æ”¹æˆè¿™æ ·">æ”¹æˆè¿™æ ·</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">elDiv1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">$div2</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<ul>
<li>
<p>å£°æ˜å˜é‡ç”¨æ¥è¡¨ç¤º DOM å¯¹è±¡ï¼Œå¯ä»¥å˜é‡åå¯ä»¥å‰ç½®ï¼š el  ï¼ˆå¯é€‰ï¼‰</p>
</li>
<li>
<p>å£°æ˜å˜é‡ç”¨æ¥è¡¨ç¤º jQuery äº§ç”Ÿçš„ api å¯¹è±¡ï¼Œå˜é‡åå‰ + $</p>
</li>
</ul>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">$div</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div#test&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>$div.appendChild ä¸å­˜åœ¨ï¼Œå› ä¸ºå®ƒä¸æ˜¯ DOM å¯¹è±¡</li>
<li>$div.find å­˜åœ¨ï¼Œå› ä¸ºå®ƒæ˜¯ jQuery å¯¹è±¡</li>
</ul>
<blockquote>
<p>ä»£ç ä¸­ï¼Œæ‰€æœ‰ $ å¼€å¤´çš„å˜é‡ï¼Œéƒ½æ˜¯ jQuery å¯¹è±¡</p>
<ul>
<li>è¿™æ˜¯çº¦å®šï¼Œé™¤éç‰¹æ®Šè¯´æ˜</li>
</ul>
</blockquote>
<p>â€‹</p>
<p>â€‹</p>
<p>â€‹</p>
<h2 id="jquery-ä»£ç ">jQuery ä»£ç </h2>
<blockquote>
<p>å½“å‰å·²ç»å®ç°çš„ä»£ç </p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">selectorOrArray</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/*
</span><span class="cm">  * elements è¡¨ç¤ºé€šè¿‡é€‰æ‹©å™¨æ‰¾åˆ°çš„ç›®æ ‡å…ƒç´ ç»„æˆçš„ä¼ªæ•°ç»„
</span><span class="cm">  * */</span>
  <span class="kd">let</span> <span class="nx">elements</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">selectorOrArray</span> <span class="o">===</span> <span class="s2">&#34;string&#34;</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// é‡è½½
</span><span class="c1"></span>    <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selectorOrArray</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">selectorOrArray</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">elements</span> <span class="o">=</span> <span class="nx">selectorOrArray</span>
  <span class="p">}</span>
  <span class="c1">// â†“ api å¯ä»¥æ“ä½œ elementsï¼ˆthis å°±æ˜¯ jQuery è¿”å›çš„ apiï¼‰
</span><span class="c1"></span>  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">},</span>
    <span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`elements`</span><span class="p">,</span> <span class="nx">elements</span><span class="p">)</span>
      <span class="kd">let</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">array</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">)))</span>
      <span class="p">}</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`array`</span><span class="p">,</span> <span class="nx">array</span><span class="p">)</span>
      <span class="nx">array</span><span class="p">.</span><span class="nx">oldApi</span> <span class="o">=</span> <span class="k">this</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">oldApi</span><span class="o">:</span> <span class="nx">selectorOrArray</span><span class="p">.</span><span class="nx">oldApi</span><span class="p">,</span>  <span class="c1">// åœ¨ find ä¸­ï¼Œé€šè¿‡ array ä¿å­˜ä¸‹æ¥çš„æ—§çš„ api
</span><span class="c1"></span>    <span class="nx">end</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">oldApi</span>
    <span class="p">},</span>
    <span class="nx">each</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elements</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span> <span class="c1">// this å°±æ˜¯ api !!!
</span><span class="c1"></span>    <span class="p">},</span>
    <span class="nx">print</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">elements</span><span class="p">)</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">},</span>
    <span class="nx">parent</span><span class="p">()</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="c1">// éå†çˆ¶å…ƒç´  â†“
</span><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">node</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// å»é‡
</span><span class="c1"></span>          <span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">})</span>
      <span class="nx">array</span><span class="p">.</span><span class="nx">oldApi</span> <span class="o">=</span> <span class="k">this</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">children</span><span class="p">()</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">node</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">})</span>
      <span class="nx">array</span><span class="p">.</span><span class="nx">oldApi</span> <span class="o">=</span> <span class="k">this</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="cm">/******************************************/</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="è°ƒç”¨">è°ƒç”¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">api1</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.red&#39;</span><span class="p">)</span>  <span class="c1">// api1 ç”¨æ¥æ“ä½œ red å…ƒç´ 
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">api2</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.blue&#39;</span><span class="p">)</span>  <span class="c1">// api2 ç”¨æ¥æ“ä½œ blue å…ƒç´ 
</span><span class="c1"></span><span class="cm">/*
</span><span class="cm">* ç”±ä¸Šï¼Œå¯ä»¥å‘ç° api1 å’Œ api2 é‡å¤äº† ï¼ˆ?!! ä»€ä¹ˆæ„æ€ï¼‰
</span><span class="cm">* */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å‘ç°é—®é¢˜--api1-å’Œ-api2-é‡å¤äº†">å‘ç°é—®é¢˜ ğŸƒ api1 å’Œ api2 é‡å¤äº†</h2>
<h3 id="åˆ†æ-">åˆ†æ ğŸƒ</h3>
<blockquote>
<p>api1 å’Œ api2 é‡å¤äº† ï¼ˆ?!! ä»€ä¹ˆæ„æ€ï¼‰</p>
</blockquote>
<p></p>
<ul>
<li>api1 å¯¹åº”ä¸€å—å†…å­˜ #101
<ul>
<li>åœ¨ #101 ä¸­ï¼Œæœ‰ find ï¼ˆ#201ï¼‰ã€eachï¼ˆ#209ï¼‰</li>
<li>å†…å­˜ #201 å¯¹åº”ä¸€ä¸ªfindå‡½æ•°ã€å†…å­˜ #209 å¯¹åº”ä¸€ä¸ªeachå‡½æ•°</li>
</ul>
</li>
<li>api2 å¯¹åº”å†…å­˜ #409
<ul>
<li>åœ¨ #409 ä¸­ï¼Œæœ‰ find ï¼ˆ#509ï¼‰ã€eachï¼ˆ#519ï¼‰</li>
<li>å†…å­˜ #509 å¯¹åº”ä¸€ä¸ªfindå‡½æ•°ã€å†…å­˜ #519 å¯¹åº”ä¸€ä¸ªeachå‡½æ•°</li>
</ul>
</li>
<li>å¯ä»¥æ¯”è¾ƒæ¸…æ¥šçš„å‘ç°ï¼š
<ul>
<li>ä¸¤ä¸ª find ã€ä¸¤ä¸ª each å®é™…ä¸Šåº”è¯¥æ˜¯åŒä¸€ä¸ªå‡½æ•°çš„å®ç°</li>
<li>ä½† jQuery æ¯åˆ›å»ºä¸€ä¸ª api ï¼Œè¿™äº›å‡½æ•°ä¹Ÿéƒ½è¢«å†æ¬¡åˆ›å»ºäº†ä¸€é</li>
<li>201å’Œ509ï¼ˆ209å’Œ519ï¼‰æ˜¯å®Œå…¨ä¸€æ ·çš„ä¸¤å—å†…å­˜</li>
</ul>
</li>
<li>è¿™å°±æ˜¯å‰é¢æåˆ°çš„ã€Œ api1 å’Œ api2 é‡å¤äº†ã€</li>
</ul>
<h3 id="è§£å†³æ–¹æ³•-">è§£å†³æ–¹æ³• ğŸƒ</h3>
<ul>
<li>
<p>find å’Œ each åº”è¯¥ä½œä¸ºã€Œå…±ç”¨å±æ€§ã€</p>
</li>
<li>
<p>é‚£ä¸ºä»€ä¹ˆä¸æŠŠå…±ç”¨çš„å±æ€§å†™åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šå»å‘¢ï¼Ÿ</p>
<ul>
<li>ç”¨ä¸€ä¸ª __proto__ å±æ€§ä¿å­˜ä¸‹å…±æœ‰å±æ€§çš„åœ°å€ï¼Œå³å¯</li>
<li>æŠŠè¿™ä¸ªåŒ…å«å…±æœ‰å±æ€§çš„å¯¹è±¡ï¼Œæ”¾åˆ° jQuery ä¸Šï¼Œè®© jQuery.prototype ç­‰äºè¿™ä¸ªå¯¹è±¡</li>
</ul>
<p></p>
</li>
</ul>
<h4 id="å¥—ç”¨åŸå‹å…¬å¼">å¥—ç”¨åŸå‹å…¬å¼</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">å¯¹è±¡</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nx">å…¶æ„é€ å‡½æ•°</span><span class="p">.</span><span class="nx">prototype</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">api1</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.red&#39;</span><span class="p">)</span>
<span class="nx">api1</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span>   <span class="c1">// åŸå‹å…¬å¼
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">api2</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.blue&#39;</span><span class="p">)</span>
<span class="nx">api2</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span>
</code></pre></td></tr></table>
</div>
</div><p>â€‹</p>
<p>â€‹</p>
<h2 id="ä½¿ç”¨åŸå‹-æ”¹é€ -jquery-">ä½¿ç”¨åŸå‹ æ”¹é€  jQuery â­•ï¸</h2>
<h3 id="ç¬¬ä¸€ç‰ˆ-jquery-ä»£ç ">ç¬¬ä¸€ç‰ˆ jQuery ä»£ç </h3>
<blockquote>
<p>å…ˆçœ‹çœ‹ä¹‹å‰çš„ç‰ˆæœ¬</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">selectorOrArray</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">elements</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">selectorOrArray</span> <span class="o">===</span> <span class="s2">&#34;string&#34;</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// é‡è½½
</span><span class="c1"></span>    <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selectorOrArray</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">selectorOrArray</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">elements</span> <span class="o">=</span> <span class="nx">selectorOrArray</span>
  <span class="p">}</span>
  <span class="c1">// â†“ api å¯ä»¥æ“ä½œ elementsï¼ˆthis å°±æ˜¯ jQuery è¿”å›çš„ apiï¼‰
</span><span class="c1"></span>  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">jquery</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">oldApi</span><span class="o">:</span> <span class="nx">selectorOrArray</span><span class="p">.</span><span class="nx">oldApi</span><span class="p">,</span>  <span class="c1">// é€šè¿‡ array ä¿å­˜ä¸‹ä¸Šä¸€æ¬¡çš„api
</span><span class="c1"></span>    <span class="c1">// ä¸‹é¢æ˜¯å„ç§åŠŸèƒ½å‡½æ•°
</span><span class="c1"></span>    <span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{...},</span>
    <span class="nx">find</span><span class="p">()</span> <span class="p">{...},</span>
    <span class="nx">each</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{...},</span>
    <span class="nx">appendTo</span><span class="p">()</span> <span class="p">{...},</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ä½¿ç”¨åŸå‹è¿›è¡Œæ”¹é€ -">ä½¿ç”¨åŸå‹è¿›è¡Œæ”¹é€  â­•ï¸</h3>
<h4 id="-å…±æœ‰å±æ€§å‡½æ•°è½¬ç§»åˆ°åŸå‹ä¸Š">â‘  å…±æœ‰å±æ€§ï¼ˆå‡½æ•°ï¼‰è½¬ç§»åˆ°åŸå‹ä¸Š</h4>
<blockquote>
<p>æŠŠæ‰€æœ‰å…±æœ‰å±æ€§ï¼Œéƒ½ç§»åˆ° jQuery çš„åŸå‹ prototype ä¸Š</p>
<p>åˆ«å¿˜äº† constructor</p>
</blockquote>
<ul>
<li>è¿™é‡Œæ˜¯ç›´æ¥ç»™ jQuery.prototype èµ‹æ–°å€¼ï¼Œè¿™æ ·å†™å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¼šå¯¼è‡´åŸæœ¬åŸå‹ä¸Šçš„ <a href="" rel="">constructor</a> è¢«è¦†ç›–ä¸¢å¤±ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨åŠ å›å» <a href="" rel="">constructor</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">,</span>
  <span class="nx">jquery</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="c1">// ä¸‹é¢æ˜¯å„ç§åŠŸèƒ½å‡½æ•°
</span><span class="c1"></span>  <span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{...},</span>
  <span class="nx">find</span><span class="p">()</span> <span class="p">{...},</span>
  <span class="nx">each</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{...},</span>
  <span class="nx">appendTo</span><span class="p">()</span> <span class="p">{...},</span>
  <span class="p">...</span>
<span class="p">}</span>
  
</code></pre></td></tr></table>
</div>
</div><h4 id="-æŠŠ-prototype-èµ‹äºˆ-jquery-åˆ›å»ºçš„å¯¹è±¡">â‘¡ æŠŠ prototype èµ‹äºˆ jQuery åˆ›å»ºçš„å¯¹è±¡</h4>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener noreffer">Object.create()</a> ï¼šåˆ›å»ºå¯¹è±¡ï¼Œå¹¶ç»™å¯¹è±¡æŒ‡å®šåŸå‹ __proto__</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">selectorOrArray</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">elements</span>
  <span class="c1">// ...
</span><span class="c1"></span>  
  <span class="kr">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span>  <span class="c1">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
</span><span class="c1"></span>  <span class="c1">// åˆ›å»º apiå¯¹è±¡ï¼Œå¹¶æŒ‡å®šå…¶åŸå‹æ˜¯ jQuery.prototype
</span><span class="c1"></span>  <span class="c1">// ç›¸å½“äº const api = {__proto__: jQuery.prototype}
</span><span class="c1"></span>  <span class="p">...</span>
  
  <span class="k">return</span> <span class="nx">api</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="-å¾€-api-ä¸Šæ·»åŠ -elements-oldapi">â‘¢ å¾€ api ä¸Šæ·»åŠ  elements ã€oldApi</h4>
<blockquote>
<p>é—®é¢˜åˆ†æï¼š</p>
<p>å½“æˆ‘ä»¬æŠŠæ‰€æœ‰åŠŸèƒ½å‡½æ•°éƒ½ä» apiï¼ˆç‹¬ç«‹å‡½æ•°ï¼‰ ä¸Šæ‹¿èµ°ï¼Œæ”¾åˆ°åŸå‹ï¼ˆç‹¬ç«‹å¯¹è±¡ï¼‰ä¸Šä¹‹å
åŸå‹ä¸Šçš„å‡½æ•°å°±è·å–ä¸åˆ° jQuery é‡Œçš„ elements ï¼Œelements ä»…ä½œç”¨åœ¨åœ¨ window.jQuery å‡½æ•°ä¸­</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p1</span><span class="p">){</span> 
  <span class="kd">let</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">p1</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">api</span>
<span class="p">};</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span> 
  <span class="nx">get</span><span class="p">(</span><span class="nx">index</span><span class="p">){</span> <span class="k">return</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="p">},</span>    <span class="c1">// è¿™é‡Œçš„elementsè·å–ä¸åˆ°ä¸Šé¢çš„ elements
</span><span class="c1"></span>  <span class="nx">end</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">oldApi</span><span class="p">},</span>
  <span class="nx">find</span><span class="p">(){</span> <span class="p">},</span> 
  <span class="c1">// ...
</span><span class="c1"></span><span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>é‚£ findã€get â€¦ æ€ä¹ˆæ“ä½œ elements å‘¢ï¼Ÿ</p>
<ul>
<li>
<p>æ¯ç”Ÿæˆæ–°çš„ elementsï¼Œéƒ½ä¼šåˆ›å»ºã€è¿”å›æ–°çš„ apiï¼ˆapi çš„åŸå‹ä¸Šå°±æ˜¯è¿™äº›åŠŸèƒ½å‡½æ•°ï¼‰</p>
</li>
<li>
<p><strong>éœ€è¦æ‰¾åˆ°å®ƒä»¬ä¹‹é—´çš„è”ç³»</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>  
<span class="c1">// addClass å‡½æ•°ä¸­çš„ this æŒ‡å‘å‡½æ•°è°ƒç”¨è€… $(&#39;.test&#39;)
</span><span class="c1">// è€Œ $(&#39;.test&#39;) === api ï¼Œæ‰€ä»¥å‡½æ•°ä¸­çš„ this æŒ‡å‘çš„å°±æ˜¯ api
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>æ‰€ä»¥è¦æƒ³åœ¨å‡½æ•°å†…éƒ¨ï¼Œè·å–åˆ° elementsï¼Œå¯ä»¥æŠŠ elements æ”¾åˆ° api ä¸Š</p>
</li>
</ul>
</li>
<li>
<p>é‚£å°±åœ¨ api ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§ elementsï¼Œç”¨æ¥ä¿å­˜  jQuery åˆ›å»ºçš„ elements</p>
</li>
<li>
<p>åœ¨åŸå‹é‡Œçš„å‡½æ•°ä¸­ï¼Œé€šè¿‡ <a href="" rel="">this.elements</a>ï¼Œå°±å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªã€ç›®æ ‡å…ƒç´ çš„æ•°ç»„ã€‘ï¼ŒåŠ ä»¥æ“ä½œ</p>
</li>
</ul>
<blockquote>
<p>ç»¼ä¸Šï¼š</p>
<ul>
<li>åœ¨åŸå‹é‡Œçš„å‡½æ•°ï¼Œè¦è·å–åˆ° jQuery é‡Œçš„å˜é‡ã€‚å¿…é¡»é€šè¿‡æ¡¥æ¢ã€ api ã€this ã€‘
<ul>
<li><strong>æ¡¥æ¢ï¼šåªè¦ api ä¸Šæœ‰ jQuery é‡Œçš„å˜é‡ï¼Œå‡½æ•°å°±èƒ½é€šè¿‡ this å…³é”®å­—è·å–åˆ°è¿™ä¸ªå˜é‡</strong></li>
</ul>
</li>
</ul>
</blockquote>
<p>æ³¨ï¼šoldApi ä»£ç å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">end</span><span class="p">(){</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">oldApi</span>  
  <span class="c1">// end åŸæœ¬å°±æ˜¯è¦æ“ä½œã€è°ƒç”¨è€…apiã€‘ä¸­çš„ oldApi
</span><span class="c1"></span>  <span class="c1">// æ‰€ä»¥ this(api) ä¸Šå¿…é¡»æœ‰ oldApiï¼Œendæ‰èƒ½æ“ä½œåˆ°ï¼Œæ‰€ä»¥åŒæ ·ä¹Ÿéœ€è¦å¾€ api ä¸Šæ·»åŠ  oldApi
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><a href="D:%5cJirengu%5c%e7%ac%ac1%e9%98%b6%e6%ae%b5%5c7-JS%e7%bc%96%e7%a8%8b%e6%8e%a5%e5%8f%a3%5c4-jQuery%e4%b8%ad%e7%9a%84%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%9e%8b%ef%bc%88%e4%b8%8b%ef%bc%89%5cdom-2-github-prototype%5csrc" rel="">å®Œæ•´ä»£ç </a></p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank" rel="noopener noreffer">Object.assign</a>ï¼šæŠŠåé¢å¯¹è±¡çš„å±æ€§ï¼Œå¤åˆ¶åˆ°å‰é¢çš„å¯¹è±¡ä¸Šï¼ˆæ³¨æ„æ˜¯æµ…å¤åˆ¶ï¼ŒJS æœ¬èº«æ²¡æœ‰æ·±å¤åˆ¶ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">selectorOrArray</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">elements</span>
  <span class="c1">// ...  elements = document.querySelectorAll(selectorOrArray)
</span><span class="c1"></span> 
  <span class="kr">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span>
  <span class="c1">// æŠŠæ‰€éœ€å˜é‡æ”¾åˆ° api ä¸Šï¼ˆä¸¤ç§æ–¹å¼ï¼‰
</span><span class="c1"></span>  <span class="c1">// ï¼ˆæ–¹å¼ä¸€ ğŸ‘‡ï¼‰
</span><span class="c1"></span>  <span class="c1">// api.elements = elements 
</span><span class="c1"></span>  <span class="c1">// api.oldApi = selectorOrArray.oldApi // ç­‰åŒäº â†“
</span><span class="c1"></span>  <span class="c1">// ï¼ˆæ–¹å¼äºŒ ğŸ‘‡ï¼‰
</span><span class="c1"></span>  <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="p">{</span>  <span class="c1">// Object.assignï¼ˆä¸¤ä¸ªå‚æ•°ï¼‰æŠŠåé¢å¯¹è±¡çš„å±æ€§ï¼Œå¤åˆ¶åˆ°å‰é¢çš„å¯¹è±¡ä¸Š
</span><span class="c1"></span>    <span class="nx">elements</span><span class="o">:</span> <span class="nx">elements</span><span class="p">,</span>
    <span class="nx">oldApi</span><span class="o">:</span> <span class="nx">selectorOrArray</span><span class="p">.</span><span class="nx">oldApi</span>
  <span class="p">})</span>
  
  <span class="k">return</span> <span class="nx">api</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1">// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; å‡½æ•°åœ¨è¿™é‡Œ
</span><span class="c1"></span>  <span class="nx">constructor</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">,</span>
  <span class="nx">jquery</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="c1">// æ‰€æœ‰å¯¹ elements çš„è°ƒç”¨ï¼Œéƒ½æ”¹æˆ this.elements
</span><span class="c1"></span>  <span class="nx">get</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">},</span>
  <span class="nx">end</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">oldApi</span> <span class="c1">// this å°±æ˜¯æ–° api
</span><span class="c1"></span>  <span class="p">}</span>
  <span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">elements2</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">))</span>
      <span class="nx">array</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elements2</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">array</span><span class="p">.</span><span class="nx">oldApi</span> <span class="o">=</span> <span class="k">this</span> <span class="c1">// find è¿”å›å€¼ä¼šè¦†ç›–åŸæœ¬çš„ apiï¼Œæ‰€ä»¥æå–ä¿å­˜ä¸‹æ—§çš„ apiï¼ˆthisï¼‰
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">each</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{...},</span>
  <span class="nx">appendTo</span><span class="p">()</span> <span class="p">{...},</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><a href="D:%5cJirengu%5c%e7%ac%ac1%e9%98%b6%e6%ae%b5%5c7-JS%e7%bc%96%e7%a8%8b%e6%8e%a5%e5%8f%a3%5c4-jQuery%e4%b8%ad%e7%9a%84%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%9e%8b%ef%bc%88%e4%b8%8b%ef%bc%89%5cdom-2-github-prototype%5csrc" rel="">å®Œæ•´ä»£ç </a></li>
</ul>
<h3 id="è¡¥å……-jqueryfn">è¡¥å……ï¼š jQuery.fn</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{...}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>åœ¨ jQuery çš„æºç ä¸­ï¼Œä½ ä¼šå‘ç°è¿˜å¤šèµ‹å€¼äº†ä¸€ä¸ª jQuery.fn ï¼ˆå¦‚ä¸Šï¼‰ã€‚ç”¨ fn æ¥è¡¨ç¤º prototype åŸå‹
<ul>
<li>å¯èƒ½æ˜¯å«Œå¼ƒ prototype è¿™ä¸ªå•è¯å¤ªé•¿äº†ï¼Œæ‰€ä»¥æƒ³ç”¨ fn æ¥è¡¨ç¤º</li>
<li>ä¹Ÿå¯èƒ½æ˜¯æƒ³å…¼å®¹ä¸€äº›ä¸å¤ªç†è§£ prototype çš„å¼€å‘è€…ï¼Œæ‰€ä»¥å¹²è„†æ¢ä¸€ä¸ªæ›´çŸ­çš„å•è¯ fn</li>
<li>æ€»ä¹‹ï¼Œå°±æ˜¯ jQuery çš„æºç ä¸­ï¼Œå¯¹ jQuery çš„ prototype åŸå‹å–äº†ä¸€ä¸ªåˆ«åå«ï¼š fn</li>
</ul>
</li>
</ul>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<blockquote>
<p>$  æŒ‡ä»£ jQuery</p>
</blockquote>
<ul>
<li>
<p>æŠŠå…±ç”¨å±æ€§ï¼ˆå‡½æ•°ï¼‰å…¨éƒ½æ”¾åˆ°  $.prototype</p>
</li>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">prototype</span>  <span class="c1">// åå­—å¤ªé•¿ä¸çˆ½ï¼Œå†èµ·ä¸ªåˆ«å fn
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç„¶åè®© api.__proto__ æŒ‡å‘ $.fn ï¼ˆä¹Ÿå°±æ˜¯è®© api.__proto__ æŒ‡å‘äº† $.prototypeï¼‰</p>
</li>
</ul>
<h3 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">selectorOrArrayOrTemplate</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">elements</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">selectorOrArrayOrTemplate</span> <span class="o">===</span> <span class="s2">&#34;string&#34;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">selectorOrArrayOrTemplate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&#34;&lt;&#34;</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// åˆ›å»º div
</span><span class="c1"></span>      <span class="nx">elements</span> <span class="o">=</span> <span class="p">[</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">selectorOrArrayOrTemplate</span><span class="p">)]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// æŸ¥æ‰¾ div
</span><span class="c1"></span>      <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selectorOrArrayOrTemplate</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">selectorOrArrayOrTemplate</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">elements</span> <span class="o">=</span> <span class="nx">selectorOrArrayOrTemplate</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">createElement</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;template&#34;</span><span class="p">)</span>
    <span class="nx">container</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span>
    <span class="k">return</span> <span class="nx">container</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">firstChild</span>
  <span class="p">}</span>

  <span class="c1">// api å¯ä»¥æ“ä½œelements
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span> <span class="c1">// åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ __proto__ ä¸ºæ‹¬å·é‡Œé¢çš„ä¸œè¥¿
</span><span class="c1"></span>  <span class="c1">// const api = {__proto__: jQuery.prototype}
</span><span class="c1"></span>  <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">elements</span><span class="o">:</span> <span class="nx">elements</span><span class="p">,</span>
    <span class="nx">oldApi</span><span class="o">:</span> <span class="nx">selectorOrArrayOrTemplate</span><span class="p">.</span><span class="nx">oldApi</span>
  <span class="p">})</span>
  <span class="c1">// api.elements = elements
</span><span class="c1"></span>  <span class="c1">// api.oldApi = selectorOrArrayOrTemplate.oldApi
</span><span class="c1"></span>  <span class="k">return</span> <span class="nx">api</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="åŸå‹">åŸå‹</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">,</span>
  <span class="nx">jquery</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">get</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">appendTo</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="k">instanceof</span> <span class="nx">Element</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">el</span> <span class="p">=&gt;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">el</span><span class="p">))</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">el</span> <span class="p">=&gt;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">el</span><span class="p">))</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">append</span><span class="p">(</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="k">instanceof</span> <span class="nx">Element</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">children</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="k">instanceof</span> <span class="nx">HTMLCollection</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">children</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">children</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">node</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">node</span><span class="p">))</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">elements2</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">))</span>
      <span class="nx">array</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elements2</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">array</span><span class="p">.</span><span class="nx">oldApi</span> <span class="o">=</span> <span class="k">this</span> <span class="c1">// this å°±æ˜¯ æ—§ api
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">each</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">},</span>
  <span class="nx">parent</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">node</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">children</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">node</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">print</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="c1">// é—­åŒ…ï¼šå‡½æ•°è®¿é—®å¤–éƒ¨çš„å˜é‡
</span><span class="c1"></span>  <span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">},</span>
  <span class="nx">end</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">oldApi</span> <span class="c1">// this å°±æ˜¯æ–° api
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="åº“å°è£…å®Œæˆ">åº“å°è£…å®Œæˆ</h2>
<blockquote>
<p>å¯ä»¥æŠŠä»£ç å…¬å¼€äº†</p>
</blockquote>
<ul>
<li>
<p>å‘å¸ƒåˆ° GitHub</p>
</li>
<li>
<p>æ·»åŠ æ–‡æ¡£ï¼Œå‘Šè¯‰åˆ«äººæ€ä¹ˆç”¨</p>
</li>
<li>
<p>è·å¾—ç§°èµ â¤ï¸ ğŸ§¡ ğŸ’› ğŸ’š ğŸ’™ ğŸ’œ ğŸ–¤ ğŸ¤ ğŸ¤</p>
<ul>
<li>å®ç°ä¸€ä¸ªå°è£…çš„åº“ï¼Œæä¾›ç»™åˆ«äººä½¿ç”¨ï¼Œå¥½ç”¨çš„è¯ï¼Œåˆ«äººå°±ä¼šç»™ä½ ç‚¹èµ</li>
</ul>
<ul>
<li>jQuery å°±æ˜¯æ—©æœŸä¸€ä¸ªç¨‹åºå‘˜å†™çš„åº“ï¼Œå¹¶æä¾›ç»™æ‰€æœ‰å¼€å‘è€…ä½¿ç”¨ ğŸ‘ğŸ‘</li>
</ul>
</li>
<li>
<p>è¿™å°±æ˜¯ç¨‹åºå‘˜çš„ç¤¾åŒºã€‚äººäººä¸ºæˆ‘ï¼Œæˆ‘ä¸ºäººäºº</p>
</li>
</ul>
<blockquote>
<p>å½“ç„¶ç°åœ¨çš„æ°´å¹³ï¼Œè‚¯å®šä¸å¤ŸæŒ‡å¯¼åˆ«äººã€‚</p>
<p>å°±å…ˆæŠŠä»£ç å†™å®Œæ•´ï¼Œè‡ªå·±ç”¨æˆåŠŸä¸€æ¬¡å³å¯</p>
<p>ä»¥åä¼šå­¦ä¹ ã€Œå¦‚ä½•åšå•å…ƒæµ‹è¯•ã€ï¼ˆå½“ç„¶ã€Œå•å…ƒæµ‹è¯•ã€å¯èƒ½æ¯”ã€Œå°è£…jQueryã€çš„ä»£ç è¿˜éš¾ï¼‰</p>
</blockquote>
<blockquote>
<p>ç°åœ¨éœ€è¦åšçš„å°±æ˜¯ï¼šè‡ªå·±èƒ½åŠ¨æ‰‹å†™æˆè‡³å°‘ 10% çš„è¿™ä¹ˆä¸€ä¸ªè½®å­</p>
<ul>
<li>åªè¦ä½ èƒ½å®Œæˆï¼Œé‚£ä»£ç æ°´å¹³è‚¯å®šä¼šæ˜¾è‘—æé«˜</li>
</ul>
</blockquote>
<p>â€‹</p>
<p>â€‹</p>
<p>â€‹</p>
<h2 id="jquery-æœ‰å¤šç‰›-x">jQuery æœ‰å¤šç‰› X</h2>
<blockquote>
<p>å®ƒæ˜¯ç›®å‰å‰ç«¯<strong>æœ€é•¿å¯¿</strong>çš„åº“ï¼Œ2006å¹´å‘å¸ƒ ï¼ˆå·²ç»14å²äº†ï¼‰</p>
<ul>
<li>vue ã€react ä¹Ÿæ‰å››äº”å²</li>
<li>åœ¨å‰ç«¯å†å²ä¸Šï¼Œæœ‰æ•°ä»¥ä¸‡è®¡çš„åº“ï¼Œæœ€ç»ˆèƒ½å¤Ÿæ´»ä¸‹æ¥å¹¶ä¸€ç›´è¢«ä½¿ç”¨çš„åº“ï¼Œå¾ˆå°‘å¾ˆå°‘ã€‚</li>
<li>jQuery æ˜¯ç›®å‰æœ€é•¿å¯¿çš„ä¸€ä¸ª</li>
</ul>
</blockquote>
<blockquote>
<p>å®ƒæ˜¯ä¸–ç•Œä¸Šä½¿ç”¨<strong>æœ€å¹¿æ³›</strong>çš„åº“ï¼Œ<a href="https://trends.builtwith.com/javascript/jQuery" target="_blank" rel="noopener noreffer">å…¨çƒ80%çš„ç½‘ç«™</a>åœ¨ç”¨</p>
<ul>
<li>å¯èƒ½ç°åœ¨æ–°çš„ç§‘æŠ€å…¬å¸ä¸ä¼šå†ç”¨ jQuery</li>
<li>ä½†æ˜¯è€ç‰Œå¤§å…¬å¸ï¼Œåƒæ˜¯é˜¿é‡Œå·´å·´ã€æ·˜å®ï¼Œä¸€ç›´éƒ½åœ¨ç”¨ jQuery</li>
</ul>
</blockquote>
<h3 id="è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼ï¼Ÿ</h3>
<blockquote>
<p>ä¸ºä»€ä¹ˆ jQuery è¿™ä¹ˆç‰› X   ï¼Ÿ</p>
<ul>
<li>å› ä¸º jquery çš„ä»£ç è®¾è®¡ï¼Œåšçš„ ç‰¹ ~ åˆ« ~ çš„ å¥½ã€‚</li>
<li>å¥½åˆ°æ²¡åŠæ³•æ”¹è¿›</li>
<li>æˆ‘ä»¬ä»Šå¤©å­¦ä¹ çš„ã€å¾ˆå¤šå†™ä»£ç çš„å¥—è·¯ï¼Œéƒ½æ˜¯ä» jQuery çš„æºç ä¸­å­¦æ¥çš„ï¼ˆå·¥ä½œä¸ªå››äº”å¹´å†å»çœ‹ jQuery æºç å­¦ä¹ ï¼Œå°ç™½ç›´æ¥çœ‹æ— å¼‚äºè‡ªæ€ï¼‰</li>
</ul>
</blockquote>
<h3 id="jquery-ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼">jQuery ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼</h3>
<ul>
<li>
<p><strong>ä¸ç”¨ new çš„æ„é€ å‡½æ•°</strong>ï¼ˆjQueryåšåˆ°äº†ï¼‰ï¼Œè¿™ä¸ªæ¨¡å¼æ²¡æœ‰ä¸“é—¨çš„åå­—</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JQuery</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">)</span>   <span class="p">=&gt;</span>   <span class="kr">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.test&#39;</span><span class="p">)</span>  <span class="c1">//åœ¨jQueryä¹‹å‰æ²¡äººæƒ³åˆ°å¯ä»¥è¿™æ ·
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>$(<strong>æ”¯æŒå¤šç§å‚æ•°</strong>)ï¼Œè¿™ä¸ªæ¨¡å¼å«åš<strong>é‡è½½</strong></p>
<ul>
<li>å¯ä»¥ä¼ é€‰æ‹©å™¨ã€ä¼ æ•°ç»„ã€ä¼  html ç»“æ„</li>
</ul>
</li>
<li>
<p><strong>ç”¨é—­åŒ…éšè—ç»†èŠ‚</strong>ï¼Œè¿™ä¸ªæ¨¡å¼æ²¡æœ‰ä¸“é—¨çš„åå­—</p>
<ul>
<li>é—­åŒ…ï¼šåœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè°ƒç”¨äº†å‡½æ•°å¤–éƒ¨çš„å˜é‡</li>
<li><u>ç”¨æˆ·æ°¸è¿œæ— æ³•ç›´æ¥æ“ä½œ elements ï¼ˆéšè—ç»†èŠ‚ï¼‰ï¼Œå¿…é¡»é€šè¿‡ api ä¸­çš„å‡½æ•°æ‰èƒ½æ“ä½œåˆ° elements</u></li>
<li>jQuery æ¯æ¬¡ç”Ÿæˆ elements åï¼Œè¿™ä¸ª elements å¯ä»¥ä¸€ç›´å­˜æ´»ã€‚å› ä¸º jQuery å‡½æ•°è¿”å›çš„ api ã€api ä¸­çš„å‡½æ•°é‡Œä»ç„¶åœ¨è·å– elements ä¸”å‡½æ•°è¿”å›å€¼æ˜¯ apiã€‚ç»†æƒ³ï¼Œè¿™å°±å¯¼è‡´ elements ä¸€ç›´åœ¨è¢«è®¿é—®ï¼Œä¸æ–­åœ¨å‡½æ•°çš„è¿”å›å€¼ä¸­è¢«è°ƒç”¨ã€‚ç›´åˆ° api æ¶ˆå¤±ï¼Œelements æ‰ä¼šæ¶ˆå¤±</li>
</ul>
</li>
<li>
<p>$div.text() å³å¯è¯»ä¹Ÿå¯å†™ï¼Œè¿™ä¸ªæ¨¡å¼å« <strong>getter/setter</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">getText</span><span class="p">()</span>
<span class="nx">setText</span><span class="p">(</span><span class="s1">&#39;newValue&#39;</span><span class="p">)</span>  <span class="c1">// ä»¥å‰éƒ½æ˜¯ä¸¤ä¸ªå‡½æ•°æ¥å®ç°è¯»ã€å†™
</span><span class="c1">// è€ŒjQueryä¸­åªç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å‚æ•°ä¸ªæ•°ï¼ŒåŒºåˆ†è¯»å†™
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>$.fn æ˜¯ $.prototype çš„åˆ«åï¼Œè¿™å«<strong>åˆ«å</strong></p>
<ul>
<li>è¿™çš„ç¡®æ˜¯è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºåœ¨ jQuery å‰å¹¶æ²¡æœ‰äººè¿™ä¹ˆå¹²è¿‡</li>
</ul>
</li>
<li>
<p>jQuery <strong>é’ˆå¯¹ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒä»£ç </strong>ï¼Œè¿™å«<strong>é€‚é…å™¨</strong></p>
<ul>
<li>ç”µæºé€‚é…å™¨ï¼šä½ åœ¨æ—¥æœ¬ï¼Œå°±è°ƒæ•´æˆ 110vï¼Œåœ¨ä¸­å›½ï¼Œå°±è°ƒæ•´æˆ220v</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="k">if</span><span class="p">(){</span>
    
<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(){</span>
    
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>â€‹</p>
<p>â€‹</p>
<h3 id="è®¾è®¡æ¨¡å¼åˆ°åº•æ˜¯å•¥">è®¾è®¡æ¨¡å¼åˆ°åº•æ˜¯å•¥</h3>
<ul>
<li>è€å­è¿™ä¸ªä»£ç å†™å¾—å¤ªæ¼‚äº®äº†ï¼Œåˆ«äººè‚¯å®šä¹Ÿç”¨å¾—åˆ°ï¼ˆå»æ‰ newã€é‡è½½ã€é—­åŒ…ã€getter/setterã€åˆ«åã€é€‚é…å™¨â€¦ï¼‰</li>
<li>é‚£å°±ç»™è¿™ç§å†™æ³•å–ä¸ªåå­—å§ï¼Œæ¯”å¦‚ï¼šé€‚é…å™¨æ¨¡å¼ï¼ˆif elseï¼‰</li>
<li>è®¾è®¡æ¨¡å¼ï¼Œå°±æ˜¯å¯¹é€šç”¨ä»£ç å–ä¸ªåå­—è€Œå·²
<ul>
<li>å®é™…ä¸Šå°±æ˜¯ç¨‹åºå‘˜çš„é»‘è¯ã€è¡Œè¯</li>
</ul>
</li>
</ul>
<p>â€‹</p>
<blockquote>
<ul>
<li><strong>é€‚é…å™¨</strong>ï¼šå°±æ˜¯é’ˆå¯¹ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒä»£ç </li>
<li><strong>åˆ«å</strong>ï¼šè®©ä¸€ä¸ªåå­—ç­‰äºå¦å¤–ä¸€ä¸ªåå­—ã€</li>
<li><strong>getter/setter</strong>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œæ—¢å¯ä»¥get ã€ä¹Ÿå¯ä»¥ set ï¼ˆå¯è¯»å¯å†™ï¼‰</li>
<li><strong>é—­åŒ…éšè—ç»†èŠ‚</strong>ï¼šç”Ÿæˆä¸€ä¸ªå˜é‡ï¼ˆelementsï¼‰ï¼Œä¸€ä¸ªå‡½æ•°ï¼ˆaddClassï¼‰å»è¯»è¿™ä¸ªå˜é‡</li>
<li><strong>é‡è½½</strong>ï¼šä¸€ä¸ªå‡½æ•°æ”¯æŒå¤šç§å½¢å¼çš„å‚æ•°</li>
<li><strong>ä¸ç”¨ new çš„æ„é€ å‡½æ•°</strong>ï¼šè¦çŸ¥é“æ˜¯æ€ä¹ˆä¸€å›äº‹   <code>const api = new JQuery('.test')   =&gt;   const api = $('.test')</code></li>
</ul>
</blockquote>
<p>â€‹</p>
<p>â€‹</p>
<h3 id="æˆ‘åº”è¯¥å­¦ä¹ è®¾è®¡æ¨¡å¼å—">æˆ‘åº”è¯¥å­¦ä¹ è®¾è®¡æ¨¡å¼å—ï¼Ÿ</h3>
<h4 id="è®¾è®¡æ¨¡å¼ä¸æ˜¯ç”¨æ¥å­¦çš„">è®¾è®¡æ¨¡å¼ä¸æ˜¯ç”¨æ¥å­¦çš„</h4>
<ul>
<li>ä½ çœ‹äº†è¿™äº›ä»£ç </li>
<li>ä½†ä½ å¹¶ä¸çŸ¥é“è¿™ä»£ç ç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜</li>
<li>çœ‹äº†ç™½çœ‹</li>
</ul>
<h4 id="è®¾è®¡æ¨¡å¼æ˜¯ç”¨æ¥æ€»ç»“çš„">è®¾è®¡æ¨¡å¼æ˜¯ç”¨æ¥æ€»ç»“çš„</h4>
<ul>
<li>
<p>ä½ åªç®¡å»å†™ä»£ç </p>
</li>
<li>
<p>æŠŠä½ çš„ä»£ç å°½é‡å†™å¥½ï¼Œä¸æ–­é‡å†™</p>
</li>
<li>
<p>æ€»ç»“ä½ çš„ä»£ç ï¼ŒæŠŠå†™å¾—å¥½çš„åœ°æ–¹æŠ½è±¡å‡ºæ¥</p>
<ul>
<li>
<p>çœ‹çœ‹ç¬¦åˆå“ªä¸ªè®¾è®¡æ¨¡å¼</p>
<p>ï¼ˆå¹¶ä¸æ˜¯çŸ¥é“è®¾è®¡æ¨¡å¼æ‰è¿™ä¹ˆå†™çš„ï¼Œè€Œæ˜¯å†™å®Œåå‘ç°ï¼Œå±…ç„¶ç”¨åˆ°äº†è®¾è®¡æ¨¡å¼ï¼‰</p>
</li>
<li>
<p>ä½ å°±å¯ä»¥å‘Šè¯‰åˆ«äººä½ ç”¨åˆ°äº†è¿™å‡ ä¸ªè®¾è®¡æ¨¡å¼</p>
</li>
<li>
<p>æ˜¾å¾—ä½ ç‰¹åˆ«é«˜ç«¯</p>
</li>
</ul>
</li>
</ul>
<p>â€‹</p>
<p>â€‹</p>
<h3 id="æœ‰äººè¯´ä¸ç”¨å­¦-jquery">æœ‰äººè¯´ä¸ç”¨å­¦ jQuery</h3>
<h4 id="çœŸç›¸">çœŸç›¸</h4>
<ul>
<li>jQuery è¿™ä¹ˆç®€å•ã€ç»å…¸çš„åº“ï¼Œä¸ºä»€ä¹ˆä¸å­¦ï¼Ÿ</li>
<li>é€šè¿‡ jQuery å¯ä»¥å­¦ä¼šå¾ˆå¤šå°è£…æŠ€å·§ï¼Œä¸ºä»€ä¹ˆä¸å­¦ï¼Ÿ
<ul>
<li>æŠŠä¸€ä¸ªå˜é‡æ”¾åˆ°å‡½æ•°é‡Œé¢ã€æš´éœ²å‡º apiï¼Œapi å¯ä»¥æ“ä½œå˜é‡ï¼Œè¿™å°±æ˜¯ å°è£…</li>
</ul>
</li>
<li>è¿ jQuery éƒ½ç†è§£ä¸äº†ï¼ŒVue / React è‚¯å®šå­¦ä¸å¥½</li>
</ul>
<h4 id="æ¨èæ–‡ç« ">æ¨èæ–‡ç« </h4>
<ul>
<li>ã€Š<a href="https://fangyinghang.com/why-still-jquery/" target="_blank" rel="noopener noreffer">jQueryéƒ½è¿‡æ—¶äº†ï¼Œé‚£æˆ‘è¿˜å­¦å®ƒå¹²å˜›ï¼Ÿ</a>ã€‹</li>
</ul>]]></description>
</item></channel>
</rss>
